# QuitCode Platform - Cognitive Features Configuration
# All flags default to false for backward compatibility.
# Enable features gradually via this config file.

cognitive_features:
  # Master switch - must be true for any sub-feature to take effect
  enabled: false

  # System 1: Fast response path (CHAT, KNOWLEDGE)
  system1:
    enable_cache: false
    cache_ttl: 300          # seconds
    cache_max_size: 1000    # max cached entries

  # System 2: Deep thinking path (THINKING, CODE, SEARCH)
  system2:
    enable_thinking_chain: false
    max_thinking_time: 30   # seconds
    reflection_depth: 3

  # Routing enhancements
  routing:
    smart_routing: false
    complexity_analysis: false
    auto_mode_switch: false

  # Monitoring
  metrics:
    cognitive_metrics: false
    detailed_tracking: false

  # ========================================
  # Refactoring Feature Flags (Phase 0-7)
  # ========================================
  # These flags control the gradual rollout of the Linus-style refactoring
  # Reference: docs/REFACTORING_WBS_V2_LINUS.md

  refactor:
    # Phase 1: Data Structure Refactoring (Week 2-5)
    new_data_models: false          # Enable models_v2.py (ProcessingMode, Event)
    unified_event_model: false      # Use unified Event class instead of SSEEvent

    # Phase 2: Processor Modularization (Week 6-12)
    new_processor_structure: false  # Use modular processors/ directory
    processor_factory_v2: false     # Use new ProcessorFactory implementation

    # Phase 3: Error Handling & Control Flow (Week 13-17)
    unified_error_handling: false   # Use exception-based error handling (no string checks)
    strategy_execution: false       # Use ExecutionStrategy pattern in Engine._execute()

    # Phase 4: Routing & Logging (Week 13-16, parallel with Phase 3)
    pattern_based_routing: false    # Use PatternBasedRouter instead of RuleBasedRouter
    unified_logging: false          # Use single logging system (structlog)

    # Phase 5: Design Cleanup (Week 18-19)
    remove_unused_protocols: false  # Remove single-implementation Protocols
    simplified_initialization: false # Use ServiceInitializer pattern

    # Master switch for all refactoring features
    # Set to true to enable individual refactor flags
    enabled: false

  # ========================================
  # Context Engineering (Manus-aligned)
  # ========================================
  # Reference: Architecture_Refactoring_Toolkit/project_docs/類人類思維架構設計/IMPLEMENTATION_PLAN_V2.md
  context_engineering:
    enabled: false                  # Master switch for context engineering

    append_only_context: false      # ContextManager: append-only context (KV-Cache friendly)
    todo_recitation: false          # TodoRecitation: todo.md recitation pattern
    error_preservation: false       # ErrorPreservation: keep failed attempts in context
    tool_masking: false             # ToolAvailabilityMask: logit masking for tool selection
    template_randomizer: false      # TemplateRandomizer: structural noise injection
    file_based_memory: false        # FileBasedMemory: file system as agent memory

    # Configuration values
    file_memory_workspace: ".agent_workspace"
    compress_keep_last: 10          # Number of entries to keep after compression
